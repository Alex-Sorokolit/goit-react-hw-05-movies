{"version":3,"file":"static/js/793.67f6c648.chunk.js","mappings":"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","sources":["components/SearchBox.styled.jsx","components/SearchBox.jsx","components/LoadMoreBtn.styled.jsx","components/LoadMoreBtn.jsx","pages/Movies/Movies.styled.jsx","pages/Movies/Movies.jsx","components/localStorageMethods.js"],"sourcesContent":["import styled from 'styled-components';\n\nexport const SearchWrapper = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  background-color: #0d1117;\n`;\n\nexport const SearchForm = styled.form`\n  display: flex;\n  align-items: center;\n  width: 50%;\n  max-width: 200px;\n  background-color: #fff;\n  border-radius: 3px;\n  height: 30px;\n  margin-bottom: 20px;\n`;\n\nexport const SearchButton = styled.button`\n  width: 30px;\n  height: 30px;\n  transition: opacity 250ms cubic-bezier(0.4, 0, 0.2, 1);\n  border: 0;\n  opacity: 0.6;\n  cursor: pointer;\n  outline: none;\n  color: black;\n\n  &:hover {\n    opacity: 1;\n  }\n`;\n\n// export const SearchBattonLabel = styled.span`\n//   font-size: 25px;\n//   padding: 0;\n//   border: 0;\n//   color: black;\n// `;\n\nexport const SearchInput = styled.input`\n  display: inline-block;\n  width: 100%;\n  font: inherit;\n  font-size: 20px;\n  border: none;\n  outline: none;\n  padding-left: 4px;\n  padding-right: 4px;\n\n  &::placeholder {\n    font: inherit;\n    font-size: 18px;\n  }\n`;\n","import { CgSearch } from 'react-icons/cg';\nimport {\n  SearchWrapper,\n  SearchForm,\n  SearchButton,\n  SearchInput,\n} from './SearchBox.styled';\n\nexport const SearchBox = ({ value, onSubmit, onChange }) => {\n  return (\n    <SearchWrapper>\n      <SearchForm onSubmit={onSubmit}>\n        <SearchInput\n          type=\"text\"\n          value={value}\n          autoComplete=\"off\"\n          autoFocus\n          placeholder=\"Search movies\"\n          onChange={event => onChange(event.target.value)}\n        />\n        <SearchButton type=\"submit\" onClick={onSubmit}>\n          <span>\n            <CgSearch />\n          </span>\n        </SearchButton>\n      </SearchForm>\n    </SearchWrapper>\n  );\n};\n","import styled from 'styled-components';\n\nexport const LoadMore = styled.button`\n  display: block;\n  margin-top: 20px;\n  margin-bottom: 20px;\n  margin-left: auto;\n  margin-right: auto;\n  background: #0d1117;\n  font-size: 20px;\n  border: none;\n  border-radius: 4px;\n  color: white;\n  min-width: 80px;\n  padding: 10px;\n  &:hover {\n    background: orangered;\n    color: white;\n  }\n`;\n","import React from 'react';\nimport { LoadMore } from './LoadMoreBtn.styled';\n\nconst Button = ({ loadMore }) => {\n  return (\n    <LoadMore className=\"Button\" onClick={loadMore}>\n      Load More\n    </LoadMore>\n  );\n};\n\nexport default Button;\n","import styled from 'styled-components';\nexport const Main = styled.div`\n  width: 100vw;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n`;\n\nexport const GaleryItem = styled.li`\n  width: 200px;\n  height: 300px;\n  background-color: grey;\n`;\n\nexport const ImageWrapper = styled.div`\n  width: 200px;\n  height: 300px;\n`;\nexport const Cover = styled.img`\n  height: 100%;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  object-fit: cover;\n`;\n","import { SearchBox } from 'components/SearchBox';\nimport { useState, useEffect } from 'react';\nimport { getSearchMovie } from 'services/Api';\nimport { StyledLink } from 'components/Link.styled';\nimport { CardSet, CardItem } from 'components/CardSet.styled';\nimport { useLocation, useSearchParams } from 'react-router-dom';\nimport { toast } from 'react-hot-toast';\nimport Button from 'components/LoadMoreBtn';\nimport { save, load } from 'components/localStorageMethods';\nimport { Main, ImageWrapper, Cover } from './Movies.styled';\n\nconst Movies = () => {\n  const [movies, setMovies] = useState(load('movies'));\n  const [query, setQuery] = useState(''); // на запит передаємо query а не queryParams щоб запит відбувався тільки при submit\n  const [page, setPage] = useState(1);\n  const [searchParams, setSearchParams] = useSearchParams(); // записує searchQuery в url\n  const queryParams = searchParams.get('query') ?? ''; // отримує запит із url\n  const [total, setTotal] = useState(0);\n  const location = useLocation();\n\n  // якщо query змінилось, робимо запит\n  useEffect(() => {\n    async function Fetch(query, page) {\n      try {\n        const movieData = await getSearchMovie(query, page);\n        const { results, total_results } = movieData;\n        // Перевірка чи є результати пошуку\n        if (results === 0) {\n          toast.error('За вашим запитом немає результатів');\n          return;\n        }\n\n        // запис даних у стейт\n        setMovies(prevMovies => [...prevMovies, ...results]);\n\n        // console.log(movies);\n\n        setTotal(total_results);\n\n        // Показуємо кількість результатів при першому запиті\n        if (page === 1) {\n          toast.success(`Знайдено ${total_results} фільмів`);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    }\n\n    if (query !== '') {\n      Fetch(query, page);\n    }\n  }, [query, page]);\n\n  // отримує дані з інпута і записує в url\n  const handleInputChange = value => {\n    setSearchParams(value !== '' ? { query: value } : {});\n  };\n\n  // при sabmit оновлює query\n  const onSubmit = event => {\n    event.preventDefault();\n    // console.log(queryParams);\n\n    if (queryParams === '') {\n      toast.error('Напишіть назву фільму в поле пошуку');\n      return;\n    }\n\n    if (queryParams === query) {\n      toast.error(`Проявляйте креатив, пришіть різні запити`);\n      return;\n    }\n\n    setQuery(queryParams);\n    setMovies([]);\n    setPage(1);\n  };\n\n  const loadMore = () => {\n    setPage(prevPage => prevPage + 1);\n    // console.log(page);\n  };\n  if (movies !== []) {\n    save('movies', movies);\n  }\n\n  return (\n    <Main>\n      <SearchBox\n        onSubmit={onSubmit}\n        value={queryParams}\n        onChange={handleInputChange}\n      />\n\n      <CardSet>\n        {movies.length() > 0 &&\n          movies.map(movie => (\n            <CardItem key={movie.id}>\n              <StyledLink to={`${movie.id}`} state={{ from: location }}>\n                {/* <p>{movie.original_title}</p> */}\n                <ImageWrapper>\n                  <Cover\n                    src={\n                      movie.poster_path !== null\n                        ? `https://image.tmdb.org/t/p/w500/${movie.poster_path}`\n                        : 'https://cdn.pixabay.com/photo/2013/07/12/12/01/film-145099_960_720.png'\n                    }\n                    width=\"200\"\n                    alt={movie.original_title}\n                  ></Cover>\n                </ImageWrapper>\n              </StyledLink>\n            </CardItem>\n          ))}\n      </CardSet>\n\n      {movies.length > 0 && total > movies.length && (\n        <Button type=\"button\" loadMore={loadMore} />\n      )}\n    </Main>\n  );\n};\n\nexport default Movies;\n\n// При поверненні повинен бути список фільмів\n","export const save = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n\nexport const load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\n"],"names":["SearchWrapper","styled","SearchForm","SearchButton","SearchInput","SearchBox","value","onSubmit","onChange","type","autoComplete","autoFocus","placeholder","event","target","onClick","LoadMore","loadMore","className","Main","ImageWrapper","Cover","useState","key","serializedState","localStorage","getItem","undefined","JSON","parse","error","console","message","load","movies","setMovies","query","setQuery","page","setPage","useSearchParams","searchParams","setSearchParams","queryParams","get","total","setTotal","location","useLocation","useEffect","getSearchMovie","movieData","results","total_results","toast","prevMovies","log","Fetch","stringify","setItem","save","preventDefault","length","map","movie","to","id","state","from","src","poster_path","width","alt","original_title","prevPage"],"sourceRoot":""}