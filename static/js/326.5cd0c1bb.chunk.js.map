{"version":3,"file":"static/js/326.5cd0c1bb.chunk.js","mappings":"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","sources":["components/SearchBox.styled.jsx","components/SearchBox.jsx","components/PageBtn.styled.jsx","components/PageBtn.jsx","pages/Movies/Movies.styled.jsx","pages/Movies/Movies.jsx","hooks/useSessionStorage.js"],"sourcesContent":["import styled from 'styled-components';\n\nexport const SearchWrapper = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  background-color: #0d1117;\n`;\n\nexport const SearchForm = styled.form`\n  display: flex;\n  align-items: center;\n  width: 50%;\n  max-width: 200px;\n  background-color: #fff;\n  border-radius: 3px;\n  height: 30px;\n  margin-bottom: 20px;\n`;\n\nexport const SearchButton = styled.button`\n  width: 30px;\n  height: 30px;\n  transition: opacity 250ms cubic-bezier(0.4, 0, 0.2, 1);\n  border: 0;\n  opacity: 0.6;\n  cursor: pointer;\n  outline: none;\n  color: black;\n\n  &:hover {\n    opacity: 1;\n  }\n`;\n\nexport const SearchInput = styled.input`\n  display: inline-block;\n  width: 100%;\n  font: inherit;\n  font-size: 20px;\n  border: none;\n  outline: none;\n  padding-left: 4px;\n  padding-right: 4px;\n\n  &::placeholder {\n    font: inherit;\n    font-size: 18px;\n  }\n`;\n","// import { useState } from 'react';\nimport { CgSearch } from 'react-icons/cg';\nimport { useSearchParams } from 'react-router-dom';\nimport { toast } from 'react-hot-toast';\nimport {\n  SearchWrapper,\n  SearchForm,\n  SearchButton,\n  SearchInput,\n} from './SearchBox.styled';\n\nexport const SearchBox = ({ onSubmit }) => {\n  const [searchParams, setSearchParams] = useSearchParams(); // записує searchQuery в url\n\n  function handleSubmit(event) {\n    event.preventDefault();\n    const query = event.target.search.value.trim().toLowerCase();\n\n    if (query === '') {\n      toast.error('Напишіть назву фільму в поле пошуку');\n      return;\n    }\n\n    if (searchParams.get('query') === query) {\n      toast.error(`Проявляйте креатив, пришіть різні запити`);\n      return;\n    }\n    setSearchParams(query !== '' ? { query } : {});\n    onSubmit();\n  }\n\n  return (\n    <SearchWrapper>\n      <SearchForm onSubmit={handleSubmit}>\n        <SearchInput\n          type=\"text\"\n          name=\"search\"\n          autoComplete=\"off\"\n          autoFocus\n          placeholder=\"Search movies\"\n        />\n        <SearchButton type=\"submit\">\n          <span>\n            <CgSearch />\n          </span>\n        </SearchButton>\n      </SearchForm>\n    </SearchWrapper>\n  );\n};\n","import styled from 'styled-components';\n\nexport const PageBtn = styled.button`\n  display: block;\n  margin-top: 20px;\n  margin-bottom: 20px;\n  margin-left: auto;\n  margin-right: auto;\n  background: #0d1117;\n  font-size: 20px;\n  border: none;\n  border-radius: 4px;\n  color: white;\n  min-width: 80px;\n  padding: 10px;\n  &:hover {\n    background: orangered;\n    color: white;\n  }\n  &:not(:last-child) {\n    margin-right: 10px;\n  }\n`;\n","import { PageBtn } from './PageBtn.styled';\n\nconst Button = ({ setPage, children }) => {\n  return (\n    <PageBtn className=\"Button\" onClick={setPage}>\n      {children}\n    </PageBtn>\n  );\n};\n\nexport default Button;\n","import styled from 'styled-components';\nexport const Main = styled.div`\n  width: 100vw;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n`;\n\nexport const GaleryItem = styled.li`\n  width: 200px;\n  height: 300px;\n  background-color: grey;\n`;\n\nexport const ImageWrapper = styled.div`\n  width: 200px;\n  height: 300px;\n`;\nexport const Cover = styled.img`\n  height: 100%;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  object-fit: cover;\n`;\n","import { SearchBox } from 'components/SearchBox';\nimport { useState, useEffect } from 'react';\nimport { getSearchMovie } from 'services/Api';\nimport { StyledLink } from 'components/Link.styled';\nimport { CardSet, CardItem } from 'components/CardSet.styled';\nimport { useLocation, useSearchParams } from 'react-router-dom';\nimport { toast } from 'react-hot-toast';\nimport Button from 'components/PageBtn';\nimport { Main, ImageWrapper, Cover } from './Movies.styled';\nimport { posterMovieUrl } from 'services/Api';\nimport { useSessionStorage } from 'hooks/useSessionStorage';\n\nconst Movies = () => {\n  const [movies, setMovies] = useState([]);\n  const [totalPages, setTotalPages] = useState(1);\n  const [page, setPage] = useSessionStorage('page');\n  const [searchParams] = useSearchParams('');\n  const location = useLocation();\n\n  useEffect(() => {\n    console.log('mount');\n    const queryParams = searchParams.get('query') ?? ''; // отримує запит із url\n    if (!queryParams) {\n      return;\n    }\n\n    async function Fetch() {\n      try {\n        const movieData = await getSearchMovie(queryParams, page);\n        const { results, total, totalPages } = movieData;\n\n        // Перевірка чи є результати пошуку\n        if (results === 0) {\n          toast.error('За вашим запитом немає результатів');\n          return;\n        }\n\n        // запис даних у стейт\n        setMovies(results);\n        setTotalPages(totalPages);\n\n        // Показуємо кількість результатів при першому запиті\n        if (page === 1) {\n          toast.success(`Знайдено ${total} фільмів`);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    }\n    Fetch();\n    return console.log('unmount');\n  }, [page, searchParams]);\n\n  function onSubmit() {\n    setMovies([]);\n    setPage(1);\n  }\n  // Кнопки пагінації\n  const nextPage = () => {\n    setPage(prevPage => prevPage + 1);\n  };\n\n  const prevPage = () => {\n    setPage(prevPage => prevPage - 1);\n  };\n\n  if (!movies) {\n    return null;\n  }\n  return (\n    <Main>\n      <SearchBox onSubmit={onSubmit} />\n      <CardSet>\n        {movies.map(movie => (\n          <CardItem key={movie.id}>\n            <StyledLink to={`${movie.id}`} state={{ from: location }}>\n              {/* <p>{movie.original_title}</p> */}\n              <ImageWrapper>\n                <Cover\n                  src={posterMovieUrl(movie.poster_path)}\n                  width=\"200\"\n                  alt={movie.original_title}\n                />\n              </ImageWrapper>\n            </StyledLink>\n          </CardItem>\n        ))}\n      </CardSet>\n\n      <div style={{ display: 'flex' }}>\n        {movies.length !== 0 && page >= 2 && (\n          <Button type=\"button\" setPage={prevPage}>\n            Previous Page\n          </Button>\n        )}\n        {page < totalPages && (\n          <Button type=\"button\" setPage={nextPage}>\n            Next Page\n          </Button>\n        )}\n      </div>\n    </Main>\n  );\n};\n\nexport default Movies;\n","import { useEffect, useState } from 'react';\n\nexport const useSessionStorage = (key, initialState = 1) => {\n  const [data, setData] = useState(\n    () => JSON.parse(sessionStorage.getItem(key)) ?? initialState\n  );\n\n  useEffect(() => {\n    sessionStorage.setItem(key, JSON.stringify(data));\n  }, [data, key]);\n  return [data, setData];\n};\n"],"names":["SearchWrapper","styled","SearchForm","SearchButton","SearchInput","SearchBox","onSubmit","useSearchParams","searchParams","setSearchParams","event","preventDefault","query","target","search","value","trim","toLowerCase","get","toast","type","name","autoComplete","autoFocus","placeholder","PageBtn","setPage","children","className","onClick","Main","ImageWrapper","Cover","useState","movies","setMovies","totalPages","setTotalPages","key","initialState","JSON","parse","sessionStorage","getItem","data","setData","useEffect","setItem","stringify","useSessionStorage","page","location","useLocation","console","log","queryParams","Fetch","getSearchMovie","movieData","results","total","map","movie","to","id","state","from","src","posterMovieUrl","poster_path","width","alt","original_title","style","display","length","prevPage"],"sourceRoot":""}